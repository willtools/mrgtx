import{_,c as d,a as n,n as w,f as h,t as a,d as p,w as b,h as L,F as m,r as k,o as f,g as y}from"./2seretxhelp.js";const C={props:{translates:{type:Object,required:!0}},data(){return{isEnter:!1,files:[],errors:[],resultList:[],index:0,isExclusion:!0,isLoading:!1}},methods:{dragEnter:function(){this.isEnter=!0},dragLeave:function(){this.isEnter=!1},dragOver:function(){},dropFile:function(){if(this.isLoading)return;let s=[...event.dataTransfer.files];this.isEnter=!1,this.addFiles(s)},selectClick:function(){document.querySelector("#select_file").click()},selectFile:function(s){const t=[...s.target.files];this.addFiles(t)},addFiles:function(s){if(this.errors=this.validation(s),this.errors.length>=1){alert(this.errors[0]);return}this.outCheckExclusion(s),this.files=this.files.concat(s)},outCheckExclusion:function(s){let t=!1;for(let e of s){let r=e.name.split(".").pop();r!="csv"&&r!="tsv"&&(t=!0)}t&&(this.isExclusion=!1)},validation:function(s){let t=[];s[0].name.split(".").pop();const e=["abp","as","c","cpp","cobol","coffee","cs","css","clj","d","dart","erl","forth","go","groovy","hs","lhs","hx","html","htm","xhtml","java","js","jsx","lisp","lsl","lua","mat","sql","m","ml","pas","pl","php","pro","swi","py","r","rb","rs","scala","scm","sh","ts","vbs","v","asm","xml","xquery"],i=2*(1024*1024*1024);let l=0;for(let c of s){let u=c.name.split(".").pop(),g=c.type.substr(0,4),x=e.includes(u);g=="text"||x||t.push(this.translates.valid_none_support+u),l+=c.size}return l>i&&t.push(this.translates.max_file_size),t},execute:function(){if(this.files.length<=0){alert(this.translates.not_exist_file);return}this.isLoading||(this.isLoading=!0,this.index=0,this.resultList=[],this.writeNextFile())},writeNextFile:function(){let s=new FileReader,t=this.files[this.index],e=this;s.readAsArrayBuffer(t),s.addEventListener("load",function(){let r=e.files.length-1,o=s.result,i=new Uint8Array(o),l=e.newLine(i);if(e.isExclusion&&e.index>0&&l.isCode&&(i=i.slice(l.indexOf+l.length)),e.index<r&&(i=e.addTrailingNewline(i,l)),e.resultList.push(i),e.index>=r){e.download(),e.isLoading=!1;return}e.index++,e.writeNextFile()}),s.onerror=function(r){e.isLoading=!1,alert(e.translates.error)}},newLine:function(s){const t=s.indexOf(10);let e={isCode:!1,indexOf:t,length:0,type:null};if(t!=-1){if(e.isCode=!0,t===0)return e.type="LF",e.length=1,e;s[t-1]===13?(e.type="CRLF",e.indexOf=t-1,e.length=2):(e.type="LF",e.length=1)}return e},addTrailingNewline:function(s,t){if(s[s.length-1]!==10){const e=new Uint8Array(s.length+t.length);return e.set(s,0),e[e.length-1]=10,t.type=="CRLF"&&(e[e.length-2]=13),e}else return s},download:function(){let s=this.files[0].name.split(".").pop(),t=new Blob(this.resultList,{type:this.files[0].type}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="merged_file."+s,e.click(),URL.revokeObjectURL(e.href),e.remove(),e=null,t=null},refresh:function(){this.index=0,this.resultList=[],this.files=[],this.files.splice()},deleteFile:function(s){this.files.splice(s,1)}}},E={class:"drop_base mb-4"},F={class:"drop_area_bg text-center"},B=n("svg",{class:"drop_file_svg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"0.8",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),j={key:0,class:"custom-loader"},O={class:"mb-4 menu"},N={class:"d-flex align-items-center right_menu"},A={for:"checkbox"},M={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4"},U={class:"tile h-100"},R={class:"text-end"},S=["onClick"],q=n("svg",{class:"delete_button_svg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),z=[q],D={class:"tile_file_svg_wrap"},H=n("svg",{class:"tile_file_svg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"0.6",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),V={class:"extension"},I={class:"file_name"};function T(s,t,e,r,o,i){return f(),d(m,null,[n("div",E,[n("div",{class:w(["drop_area",{enter:o.isEnter}]),onDragenter:t[0]||(t[0]=(...l)=>i.dragEnter&&i.dragEnter(...l)),onDragleave:t[1]||(t[1]=(...l)=>i.dragLeave&&i.dragLeave(...l)),onDragover:[t[2]||(t[2]=(...l)=>i.dragOver&&i.dragOver(...l)),t[3]||(t[3]=h(()=>{},["prevent"]))],onDrop:t[4]||(t[4]=h((...l)=>i.dropFile&&i.dropFile(...l),["prevent"]))},a(e.translates.drop_and_drag),35),n("div",F,[B,o.isLoading?(f(),d("div",j)):p("",!0)]),n("input",{id:"select_file",style:{display:"none"},ref:"input",type:"file",accept:"text/*,.abp,.as,.c,.cpp,.cobol,.coffee,.cs,.css,.clj,.d,.dart,.erl,.forth,.go,.groovy,.hs,.lhs,.hx,.html,.htm,.xhtml,.java,.js,.jsx,.lisp,.lsl,.lua,.mat,.sql,.m,.ml,.pas,.pl,.php,.pro,.swi,.py,.r,.rb,.rs,.scala,.scm,.sh,.ts,.vbs,.v,.asm,.xml,.xquery",onChange:t[5]||(t[5]=l=>i.selectFile(l)),multiple:""},null,544),o.isLoading?p("",!0):(f(),d("button",{key:0,class:"select_button",onClick:t[6]||(t[6]=(...l)=>i.selectClick&&i.selectClick(...l))},a(e.translates.file_select),1))]),n("div",O,[n("div",null,[n("button",{class:"execute_button",onClick:t[7]||(t[7]=(...l)=>i.execute&&i.execute(...l))},a(e.translates.file_merge_button),1)]),n("div",N,[b(n("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>o.isExclusion=l)},null,512),[[L,o.isExclusion]]),n("label",A,a(e.translates.exclusion_header),1),n("button",{class:"refresh_button",onClick:t[9]||(t[9]=(...l)=>i.refresh&&i.refresh(...l))},a(e.translates.reset),1)])]),n("div",M,[(f(!0),d(m,null,k(o.files,(l,c)=>(f(),d("div",{key:c,class:"col"},[n("div",U,[n("div",R,[n("button",{class:"delete_button",onClick:u=>i.deleteFile(c)},z,8,S)]),n("div",D,[H,n("div",V,a(l.name.split(".").pop()),1)]),n("div",I,a(l.name),1)])]))),128))])],64)}const G=_(C,[["render",T]]),v=y({});v.component("merge-file-component",G);v.mount("#merge_file");
